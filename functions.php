<?php/** * discovery functions and definitions * * @package discovery * @since discovery 1.0 *//** * Set the content width based on the theme's design and stylesheet. * * @since discovery 1.0 */if ( ! isset( $content_width ) )	$content_width = 654; /* pixels */if ( ! function_exists( 'discovery_setup' ) ):/** * Sets up theme defaults and registers support for various WordPress features. * * Note that this function is hooked into the after_setup_theme hook, which runs * before the init hook. The init hook is too late for some features, such as indicating * support post thumbnails. * * @since discovery 1.0 */function discovery_setup() {	/**	 * Custom template tags for this theme.	 */	require( get_template_directory() . '/inc/template-tags.php' );	/**	 * Custom functions that act independently of the theme templates	 */	require( get_template_directory() . '/inc/tweaks.php' );	/**	 * Make theme available for translation	 * Translations can be filed in the /languages/ directory	 * If you're building a theme based on discovery, use a find and replace	 * to change 'discovery' to the name of your theme in all the template files	 */	load_theme_textdomain( 'discovery', get_template_directory() . '/languages' );	/**	 * Add default posts and comments RSS feed links to head	 */	add_theme_support( 'automatic-feed-links' );	/**	 * This theme uses wp_nav_menu() in one location.	 */	register_nav_menus( array(		'primary' => __( 'Primary Menu', 'discovery' ),	) );		/**	 * Add support for post thumbnails	 */	add_theme_support('post-thumbnails');	add_image_size( 100, 300, true);	add_image_size( 'featured', 670, 300, true );	add_image_size( 'recent', 700, 400, true );		add_image_size( 'home_large', 1040, 680, true );	/**	 * Add support for the Aside Post Formats	 */	add_theme_support( 'post-formats', array( 'aside', ) );}endif; // discovery_setupadd_action( 'after_setup_theme', 'discovery_setup' );/** * Enqueue scripts and styles */function discovery_scripts() {	wp_enqueue_style( 'style', get_stylesheet_uri() );	//wp_enqueue_script( 'small-menu', get_template_directory_uri() . '/js/small-menu.js', array( 'jquery' ), '20120206', true );	wp_enqueue_script( 'smoothup', get_template_directory_uri() . '/js/smoothscroll.js', array( 'jquery' ), '',  true );	//wp_enqueue_style('animate', get_template_directory_uri().'/css/animate.min.css');	//wp_enqueue_script( 'inview', get_template_directory_uri() . '/js/Inview.js', array('jquery'));	//wp_enqueue_script( 'theme-js', get_template_directory_uri() . '/js/animate.js', array('jquery', 'inview'));}add_action( 'wp_enqueue_scripts', 'discovery_scripts' );/*** Global Customizer Settings*//** * sanitize customizer text input */ function discovery_sanitize_text( $input ) {    return wp_kses_post( force_balance_tags( $input ) );}function discovery_sanitize_url( $input ) {    return wp_kses_post( force_balance_tags( $input ) );}function discovery_sanitize_upload($input){	return esc_url_raw($input);	}function discovery_sanitize_html( $input ) {    return wp_kses_post( force_balance_tags( $input ) );}add_filter( 'wp_title', 'discovery_wp_title' );/** * Filters the page title appropriately depending on the current page * * This function is attached to the 'wp_title' fiilter hook. * * @uses	home_url() * @uses	is_home() * @uses	is_front_page() */function discovery_wp_title( $title ) {	global $page, $paged;	if ( is_feed() )		return $title;	$site_description = get_bloginfo( 'description' );	$filtered_title = $title . get_bloginfo( 'name' );	$filtered_title .= ( ! empty( $site_description ) && ( is_home() || is_front_page() ) ) ? ' | ' . $site_description: '';	$filtered_title .= ( 2 <= $paged || 2 <= $page ) ? ' | ' . sprintf( __( 'Page %s', 'discovery' ), max( $paged, $page ) ) : '';	return $filtered_title;}if ( ! function_exists( 'discovery_admin_header_image' ) ) :/** * Custom header image markup displayed on the Appearance > Header admin panel. * * @see discovery_custom_header_setup(). * * @since discovery 1.0 */function discovery_admin_header_image() { ?>	<div id="headimg">		<?php		if ( 'blank' == get_header_textcolor() || '' == get_header_textcolor() )			$style = ' style="display:none;"';		else			$style = ' style="color:#' . get_header_textcolor() . ';"';		?>		<h1><a id="name"<?php echo $style; ?> onclick="return false;" href="<?php echo esc_url( home_url( '/' ) ); ?>"><?php bloginfo( 'name' ); ?></a></h1>		<div id="desc"<?php echo $style; ?>><?php bloginfo( 'description' ); ?></div>		<?php $header_image = get_header_image();		if ( ! empty( $header_image ) ) : ?>			<img src="<?php echo esc_url( $header_image ); ?>" alt="" />		<?php endif; ?>	</div><?php }endif; // discovery_admin_header_image